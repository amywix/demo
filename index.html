<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Cavatar Hotel ‚Äì Luxury Redefined</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root {
      --cavatar-z: 9999;
      --cavatar-width: clamp(220px, 90vw, 400px);
      --cavatar-height: clamp(320px, 65vh, 580px);
    }

    /* ===== Avatar Panel ===== */
    #cavatar-root {
      position: fixed;
      right: 16px;
      bottom: calc(env(safe-area-inset-bottom) + 16px);
      width: var(--cavatar-width);
      height: var(--cavatar-height);
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 12px 36px rgba(0,0,0,.25);
      z-index: var(--cavatar-z);
      background: #000;
      border: 1px solid rgba(255,255,255,.15);
      display: none;
      transition: all 0.3s ease-in-out;
    }

    #cavatar-iframe {
      width: 100%;
      height: 100%;
      border: 0;
      display: block;
    }

    /* ===== Cutout Bubble Mode ===== */
    #cavatar-root.cutout {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      clip-path: circle(50% at 50% 50%);
      background: transparent;
      border: none;
      box-shadow: 0 8px 24px rgba(0,0,0,.25);
    }

    /* ===== Caption Overlay ===== */
    #cavatar-caption {
      position: fixed;
      right: 16px;
      bottom: calc(env(safe-area-inset-bottom) + var(--cavatar-height) + 10px);
      max-width: 420px;
      background: rgba(0,0,0,.8);
      color: #fff;
      padding: 10px 12px;
      border-radius: 10px;
      font: 500 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      z-index: var(--cavatar-z);
      display: none;
      backdrop-filter: blur(6px) saturate(120%);
      box-shadow: 0 6px 20px rgba(0,0,0,.25);
      transition: opacity 0.25s ease;
    }

    /* ===== Controls ===== */
    #cavatar-controls {
      position: fixed;
      right: 20px;
      bottom: calc(env(safe-area-inset-bottom) + var(--cavatar-height) + 55px);
      display: flex;
      gap: 8px;
      z-index: var(--cavatar-z);
    }

    .cavatar-btn {
      appearance: none;
      border: 0;
      border-radius: 999px;
      padding: 8px 12px;
      background: #111827;
      color: #fff;
      font: 600 12px/1 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      box-shadow: 0 8px 20px rgba(0,0,0,.25);
      cursor: pointer;
      opacity: 0.95;
      transition: all 0.2s ease;
    }
    .cavatar-btn:hover { opacity: 1; }

    /* ===== MOBILE ===== */
    @media (max-width: 540px) {
      :root {
        --cavatar-width: clamp(240px, 94vw, 360px);
        --cavatar-height: clamp(320px, 64vh, 520px);
      }

      #cavatar-root {
        left: 50%;
        right: auto;
        bottom: calc(env(safe-area-inset-bottom) + 8px);
        transform: translateX(-50%);
        border-radius: 12px;
      }

      #cavatar-caption {
        left: 50%;
        right: auto;
        bottom: calc(env(safe-area-inset-bottom) + var(--cavatar-height) + 8px);
        transform: translateX(-50%);
        width: 92vw;
        font-size: 13px;
        line-height: 1.3;
      }

      #cavatar-controls {
        left: 50%;
        right: auto;
        transform: translateX(-50%);
        bottom: calc(env(safe-area-inset-bottom) + var(--cavatar-height) + 50px);
      }

      .cavatar-btn {
        padding: 6px 10px;
        font-size: 11px;
      }
    }
  </style>
</head>

<body class="font-sans antialiased bg-white">
  <!-- ===== Header ===== -->
  <header class="sticky top-0 z-[50] bg-white/80 backdrop-blur border-b">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <h1 class="text-xl md:text-2xl font-bold">üè® Cavatar Hotel</h1>
      <nav class="hidden md:flex gap-6 text-sm text-gray-600">
        <a href="#rooms" class="hover:text-purple-600">Rooms</a>
        <a href="#amenities" class="hover:text-purple-600">Amenities</a>
        <a href="#contact" class="hover:text-purple-600">Contact</a>
      </nav>
    </div>
  </header>

  <!-- ===== Hero ===== -->
  <section class="bg-gradient-to-br from-indigo-500 to-purple-600 text-white text-center">
    <div class="max-w-7xl mx-auto px-4 py-16">
      <h2 class="text-4xl md:text-6xl font-extrabold mb-4">Welcome to Cavatar Hotel</h2>
      <p class="text-lg md:text-2xl opacity-90 max-w-3xl mx-auto">Experience luxury redefined with our AI-powered concierge. Where technology meets hospitality.</p>
    </div>
  </section>

  <!-- ===== Rooms Section ===== -->
  <section id="rooms" class="max-w-7xl mx-auto px-4 py-12">
    <h3 class="text-2xl font-bold mb-4">Rooms</h3>
    <p class="text-gray-600">(Demo content trimmed for brevity)</p>
  </section>

  <!-- ===== Avatar Elements ===== -->
  <div id="cavatar-root" aria-live="polite" aria-label="Cavatar concierge video avatar">
    <iframe id="cavatar-iframe" title="Cavatar Concierge" allow="microphone" referrerpolicy="no-referrer"></iframe>
  </div>

  <div id="cavatar-caption" role="status"></div>

  <div id="cavatar-controls" class="hidden">
    <button id="cavatar-toggle-shape" class="cavatar-btn" title="Toggle cutout/panel">Bubble</button>
    <button id="cavatar-close" class="cavatar-btn" title="Hide avatar">Close</button>
  </div>

  <!-- ===== Script ===== -->
  <script>
    (function () {
      const HOST = "https://labs.heygen.com";
      const SHARE_URL = HOST + "/guest/streaming-embed?share=eyJxdWFsaXR5IjoiaGlnaCIsImF2YXRhck5hbWUiOiIwOWQxNDJjZWMyY2Q0ZjkzYjZlMTBiYmI3NTdlMzM2OCIsInByZXZpZXdJbWciOiJodHRwczovL2ZpbGVzMi5oZXlnZW4uYWkvYXZhdGFyL3YzLzA5ZDE0MmNlYzJjZDRmOTNiNmUxMGJiYjc1N2UzMzY4L2Z1bGwvMi4yL3ByZXZpZXdfdGFyZ2V0LndlYnAiLCJuZWVkUmVtb3ZlQmFja2dyb3VuZCI6ZmFsc2UsImtub3dsZWRnZUJhc2VJZCI6IjQ5OWM2NDcyMjBiZTRmZDI5OWY4YWQ3N2ZiMGM0YTVmIiwidXNlcm5hbWUiOiI4NjM0NTdjMTNlYjM0YjVlOTVjOGZmMmJhN2Q1MzEwMSJ9&inIFrame=1";

      const root = document.getElementById('cavatar-root');
      const iframe = document.getElementById('cavatar-iframe');
      const caption = document.getElementById('cavatar-caption');
      const controls = document.getElementById('cavatar-controls');
      const btnShape = document.getElementById('cavatar-toggle-shape');
      const btnClose = document.getElementById('cavatar-close');

      iframe.src = SHARE_URL;

      window.addEventListener('message', (e) => {
        if (e.origin !== HOST || !e.data || e.data.type !== 'streaming-embed') return;

        switch (e.data.action) {
          case 'init':
            root.style.display = 'block';
            controls.classList.remove('hidden');
            showCaption("Hi there! I'm your virtual concierge. How can I help?");
            break;
          case 'hide':
            root.style.display = 'none';
            caption.style.display = 'none';
            break;
          case 'transcript':
          case 'subtitle':
            const text = (e.data.payload && (e.data.payload.text || e.data.payload.caption)) || e.data.text;
            if (text) showCaption(text, 3500);
            break;
        }
      });

      function showCaption(text, ms = 4000) {
        caption.textContent = text;
        caption.style.display = 'block';
        clearTimeout(showCaption._t);
        showCaption._t = setTimeout(() => caption.style.display = 'none', ms);
      }

      setTimeout(() => showCaption('Welcome to Cavatar Hotel.'), 1200);
      setTimeout(() => showCaption('Ask me about rooms, spa, or dining.'), 5200);

      btnShape.addEventListener('click', () => {
        root.classList.toggle('cutout');
        btnShape.textContent = root.classList.contains('cutout') ? 'Panel' : 'Bubble';
      });
      btnClose.addEventListener('click', () => {
        root.style.display = 'none';
        caption.style.display = 'none';
      });

      window.addEventListener('resize', () => {
        if (window.innerWidth < 540) root.style.transform = 'translateX(-50%)';
      });
    })();
  </script>

  <!-- ===== Contact & Footer ===== -->
  <section id="contact" class="max-w-7xl mx-auto px-4 py-16">
    <h3 class="text-2xl font-bold mb-4">Contact</h3>
    <p class="text-gray-600">Try the avatar in the bottom corner ‚Äî it automatically adapts to any screen size, supports cutout mode, and shows captions.</p>
  </section>

  <footer class="bg-gray-900 text-white py-10 text-center">
    <p class="opacity-80">¬© 2025 Cavatar Hotel. All rights reserved.</p>
  </footer>
</body>
</html>
