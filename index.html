<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Cavatar Hotel ‚Äì AI Concierge Virtual Tour</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { display: flex; flex-direction: column; min-height: 100vh; overflow-x: hidden; }
    main { display: flex; flex-direction: row; flex: 1; }
    section.left { flex: 1; padding: 2rem; max-width: 55%; }
    aside { flex: 1; display: flex; align-items: flex-start; justify-content: center; position: relative; background: #fff; }
    :root { --cavatar-z: 9999; }
    #cavatar-root {
      position: sticky;
      top: 20vh;
      height: 420px;
      width: 240px;
      border-radius: 18px;
      overflow: hidden;
      background: #000;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.35);
      z-index: var(--cavatar-z);
      opacity: 0;
      transition: opacity 0.5s ease;
    }
    #cavatar-root.show { opacity: 1; }
    #cavatar-iframe { width: 100%; height: 100%; border: none; display: block; }

    #booking-modal, #check-modal { display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:white; border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,0.3); padding:20px; z-index:10000; width:320px; }
    #booking-modal input, #check-modal input, #booking-modal select { width:100%; margin:6px 0; padding:6px; border:1px solid #ccc; border-radius:6px; }
    #booking-modal button, #check-modal button { background:#6366f1; color:white; padding:8px 10px; border-radius:6px; width:100%; border:none; cursor:pointer; }
    #booking-modal button:hover, #check-modal button:hover { background:#4f46e5; }

    #avatar-ui { position: fixed; right: 280px; top: 30%; background: rgba(255,255,255,0.9); border-radius: 12px; box-shadow: 0 6px 20px rgba(0,0,0,0.2); padding: 14px; display: none; width: 220px; z-index: 9998; }
    #avatar-ui button { display: block; width: 100%; margin: 6px 0; background: #6366f1; color: white; padding: 6px; border-radius: 6px; border: none; cursor: pointer; font-size: 14px; }
    #avatar-ui button:hover { background: #4f46e5; }
  </style>
</head>
<body class="font-sans antialiased bg-white">
  <header class="sticky top-0 z-50 bg-white/80 backdrop-blur border-b">
    <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
      <h1 class="text-2xl font-bold text-indigo-600">üè® Cavatar Hotel</h1>
      <nav class="hidden md:flex gap-6 text-sm text-gray-600">
        <a href="#rooms" class="hover:text-indigo-500">Rooms</a>
        <a href="#amenities" class="hover:text-indigo-500">Amenities</a>
        <a href="#dining" class="hover:text-indigo-500">Dining</a>
        <a href="#spa" class="hover:text-indigo-500">Spa</a>
        <a href="#contact" class="hover:text-indigo-500">Contact</a>
      </nav>
    </div>
  </header>

  <section class="bg-gradient-to-br from-indigo-500 to-purple-600 text-white text-center py-16">
    <div class="max-w-7xl mx-auto">
      <h2 class="text-5xl font-extrabold mb-4">Welcome to Cavatar Hotel</h2>
      <p class="text-lg mb-6">Experience futuristic hospitality with our AI-powered concierge assistant.</p>
      <a href="#rooms" class="bg-white text-indigo-600 font-semibold px-6 py-3 rounded-lg shadow hover:bg-indigo-100 transition">Explore Rooms</a>
    </div>
  </section>

  <main>
    <section class="left">
      <section id="rooms" class="py-12">
        <h3 class="text-3xl font-bold text-gray-800 mb-6">Our Signature Rooms</h3>
        <div class="space-y-8">
          <div class="rounded-2xl overflow-hidden shadow-lg bg-white hover:shadow-2xl transition">
            <img src="images/deluxe.jpg" class="w-full h-64 object-cover" alt="Deluxe Ocean Suite">
            <div class="p-6">
              <h4 class="text-2xl font-semibold text-indigo-600 mb-2">Deluxe Ocean Suite</h4>
              <p class="text-gray-600 mb-4">Ocean views, smart automation, and marble ensuite luxury.</p>
              <button class="bg-indigo-600 text-white px-4 py-2 rounded-md" onclick="openBooking('Deluxe Ocean Suite')">Book Now</button>
            </div>
          </div>
          <div class="rounded-2xl overflow-hidden shadow-lg bg-white hover:shadow-2xl transition">
            <img src="images/standard.jpg" class="w-full h-64 object-cover" alt="Executive City Suite">
            <div class="p-6">
              <h4 class="text-2xl font-semibold text-indigo-600 mb-2">Executive City Suite</h4>
              <p class="text-gray-600 mb-4">Skyline views and business-ready workspace for professionals.</p>
              <button class="bg-indigo-600 text-white px-4 py-2 rounded-md" onclick="openBooking('Executive City Suite')">Book Now</button>
            </div>
          </div>
        </div>
      </section>

      <section id="contact" class="py-12 text-center">
        <h3 class="text-2xl font-bold mb-4">Contact</h3>
        <p class="text-gray-600">This prototype demonstrates AI-guided hospitality experiences with a virtual concierge.</p>
        <p class="mt-4 text-indigo-600 font-semibold">¬© 2025 Cavatar Hotel. All rights reserved.</p>
      </section>
    </section>

    <aside>
      <div id="cavatar-root"><iframe id="cavatar-iframe" allow="microphone" referrerpolicy="no-referrer" title="Cavatar Concierge"></iframe></div>
      <div id="avatar-ui">
        <p class="text-sm text-gray-700 mb-2">How can I help you?</p>
        <button id="btn-book">Make a Booking</button>
        <button id="btn-check">Check Booking</button>
      </div>
    </aside>
  </main>

  <!-- Booking Modal -->
  <div id="booking-modal">
    <h3 class="font-bold text-gray-800 mb-2">Book a Room</h3>
    <input id="guestName" type="text" placeholder="Full Name" />
    <input id="guestEmail" type="email" placeholder="Email" />
    <select id="roomType">
      <option>Deluxe Ocean Suite</option>
      <option>Executive City Suite</option>
    </select>
    <input id="checkIn" type="date" />
    <input id="checkOut" type="date" />
    <button id="submitBooking">Confirm Booking</button>
  </div>

  <!-- Check Modal beside avatar -->
  <div id="check-modal">
    <h3 class="font-bold text-gray-800 mb-2">Check Booking</h3>
    <input id="checkEmail" type="email" placeholder="Enter your email" />
    <button id="submitCheck">Find Booking</button>
  </div>

  <script>
    const iframe = document.getElementById('cavatar-iframe');
    const root = document.getElementById('cavatar-root');
    const modal = document.getElementById('booking-modal');
    const checkModal = document.getElementById('check-modal');
    const avatarUI = document.getElementById('avatar-ui');

    let bookings = [
      { id: 1, name: 'John Smith', room: 'Deluxe Ocean Suite', checkIn: '2025-10-18', checkOut: '2025-10-22', email: 'john@example.com' },
      { id: 2, name: 'Jane Doe', room: 'Executive City Suite', checkIn: '2025-11-01', checkOut: '2025-11-05', email: 'jane@example.com' }
    ];

    iframe.src = "https://labs.heygen.com/guest/streaming-embed?share=eyJxdWFsaXR5IjoiaGlnaCIsImF2YXRhck5hbWUiOiIwOWQxNDJjZWMyY2Q0ZjkzYjZlMTBiYmI3NTdlMzM2OCIsInByZXZpZXdJbWciOiJodHRwczovL2ZpbGVzMi5oZXlnZW4uYWkvYXZhdGFyL3YzLzA5ZDE0MmNlYzJjZDRmOTNiNmUxMGJiYjc1N2UzMzY4L2Z1bGwvMi4yL3ByZXZpZXdfdGFyZ2V0LndlYnAiLCJuZWVkUmVtb3ZlQmFja2dyb3VuZCI6ZmFsc2UsImtub3dsZWRnZUJhc2VJZCI6IjQ5OWM2NDcyMjBiZTRmZDI5OWY4YWQ3N2ZiMGM0YTVmIiwidXNlcm5hbWUiOiI4NjM0NTdjMTNlYjM0YjVlOTVjOGZmMmJhN2Q1MzEwMSJ9&inIFrame=1";

    iframe.addEventListener('load', () => {
      root.classList.add('show');
    });

    // Greeting and options on first click
    document.body.addEventListener('click', () => {
      iframe.contentWindow.postMessage({
        type: 'streaming-embed',
        action: 'speak',
        payload: { text: 'Welcome to Cavatar Hotel! Would you like to make or check a booking?' }
      }, '*');
      avatarUI.style.display = 'block';
    }, { once: true });

    document.getElementById('btn-book').onclick = () => {
      iframe.contentWindow.postMessage({ type: 'streaming-embed', action: 'speak', payload: { text: 'Great! Let\'s make a new booking.' } }, '*');
      modal.style.display = 'block';
    };

    document.getElementById('btn-check').onclick = () => {
      iframe.contentWindow.postMessage({ type: 'streaming-embed', action: 'speak', payload: { text: 'Sure! Please enter the email used for your booking.' } }, '*');
      checkModal.style.display = 'block';
    };

    document.getElementById('submitBooking').onclick = () => {
      const name = document.getElementById('guestName').value.trim();
      const email = document.getElementById('guestEmail').value.trim();
      const room = document.getElementById('roomType').value;
      const checkIn = document.getElementById('checkIn').value;
      const checkOut = document.getElementById('checkOut').value;
      if(!name || !email || !checkIn || !checkOut){ alert('Please fill in all booking fields'); return; }
      const newBooking = { id: bookings.length+1, name, email, room, checkIn, checkOut };
      bookings.push(newBooking);
      localStorage.setItem('bookings', JSON.stringify(bookings));
      modal.style.display = 'none';
      iframe.contentWindow.postMessage({ type: 'streaming-embed', action: 'speak', payload: { text: `Thank you ${name}, your booking for the ${room} is confirmed!` } }, '*');
    };

    document.getElementById('submitCheck').onclick = () => {
      const email = document.getElementById('checkEmail').value.trim();
      const allBookings = JSON.parse(localStorage.getItem('bookings')) || bookings;
      const found = allBookings.find(b => b.email.toLowerCase() === email.toLowerCase());
      checkModal.style.display = 'none';
      if(found){
        iframe.contentWindow.postMessage({ type: 'streaming-embed', action: 'speak', payload: { text: `I found your booking, ${found.name}. You have a ${found.room} from ${found.checkIn} to ${found.checkOut}.` } }, '*');
      } else {
        iframe.contentWindow.postMessage({ type: 'streaming-embed', action: 'speak', payload: { text: 'I could not find any booking with that email.' } }, '*');
      }
    };

    function openBooking(room){
      document.getElementById('roomType').value = room;
      modal.style.display='block';
    }
  </script>
</body>
</html>
